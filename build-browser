#!node_modules/.bin/lsc
require! [fs, './prelude.ls']

content = fs.read-file-sync 'prelude.js', 'utf-8', {+bare}
            .split '\n'
            .concat 'return prelude;'
            .map ('  ' +)
            .join '\n'

process.stdout.write do
  """
  // prelude.ls #{ prelude.VERSION }
  // Copyright (c) 2013 George Zahariev
  // Released under the MIT License
  // raw.github.com/gkz/prelude-ls/master/LICNSE
  (function (root, factory) {
    if (typeof define === 'function' && define.amd) {
      define(factory);
    } else {
      var prelude = factory(),
          original = root.prelude;
      prelude.noConflict = function() {
        root.prelude = original;
        delete prelude.noConflict;
        return prelude;
      };
      root.prelude = prelude;
    }
  }(this, function () {
  #content
  }));\n
  """
